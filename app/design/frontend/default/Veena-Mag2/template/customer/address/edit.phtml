<?php
/**
 * Magento
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Academic Free License (AFL 3.0)
 * that is bundled with this package in the file LICENSE_AFL.txt.
 * It is also available through the world-wide-web at this URL:
 * http://opensource.org/licenses/afl-3.0.php
 * If you did not receive a copy of the license and are unable to
 * obtain it through the world-wide-web, please send an email
 * to license@magentocommerce.com so we can send you a copy immediately.
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade Magento to newer
 * versions in the future. If you wish to customize Magento for your
 * needs please refer to http://www.magentocommerce.com for more information.
 *
 * @category    design
 * @package     base_default
 * @copyright   Copyright (c) 2013 Magento Inc. (http://www.magentocommerce.com)
 * @license     http://opensource.org/licenses/afl-3.0.php  Academic Free License (AFL 3.0)
 */
?>
<?php
/**
 * Edit customer address template
 *
 * @see Mage_Customer_Block_Address_Edit
 */
?>
<?php if($this->getTitle()): ?>
<div class="page-title">
    <h1><?php echo $this->getTitle() ?></h1>
</div>
<?php endif; ?>
<?php echo $this->getMessagesBlock()->getGroupedHtml() ?>
<form action="<?php echo $this->getSaveUrl() ?>" method="post" id="form-validate">
    <div class="fieldset">
    <?php echo $this->getBlockHtml('formkey')?>
    <input type="hidden" name="success_url" value="<?php echo $this->getSuccessUrl() ?>" />
    <input type="hidden" name="error_url" value="<?php echo $this->getErrorUrl() ?>" />
        <h2 class="legend"><?php echo $this->__('Contact Information') ?></h2>
        <ul class="form-list">
            <li class="fields">
                <?php echo $this->getNameBlockHtml() ?>
            </li>
            <li class="wide">
                <label for="company"><?php echo $this->__('Company') ?></label>
                <div class="input-box">
                    <input type="text" name="company" id="company" title="<?php echo $this->__('Company') ?>" value="<?php echo $this->escapeHtml($this->getAddress()->getCompany()) ?>" class="input-text <?php echo $this->helper('customer/address')->getAttributeValidationClass('company') ?>" />
                </div>
            </li>
        </ul>
    </div>
    <div class="fieldset">
        <h2 class="legend"><?php echo $this->__('Address') ?></h2>
        <ul class="form-list">
        <?php $_streetValidationClass = $this->helper('customer/address')->getAttributeValidationClass('street'); ?>
            <li class="wide">
                <label for="street_1" class="required"><em>*</em><?php echo $this->__('Street Address') ?></label>
                <div class="input-box">
                    <input type="text" name="street[]" value="<?php echo $this->escapeHtml($this->getAddress()->getStreet(1)) ?>" title="<?php echo $this->__('Street Address') ?>" id="street_1" class="input-text <?php echo $_streetValidationClass ?>" />
                </div>
            </li>
        <?php $_streetValidationClass = trim(str_replace('required-entry', '', $_streetValidationClass)); ?>
        <?php for ($_i = 2, $_n = $this->helper('customer/address')->getStreetLines(); $_i <= $_n; $_i++): ?>
            <li class="wide">
                <div class="input-box">
                    <input type="text" name="street[]" value="<?php echo $this->escapeHtml($this->getAddress()->getStreet($_i)) ?>" title="<?php echo $this->__('Street Address %s', $_i) ?>" id="street_<?php echo $_i ?>" class="input-text <?php echo $_streetValidationClass ?>" />
                </div>
            </li>
        <?php endfor; ?>
            <?php if ($this->helper('customer/address')->isVatAttributeVisible()) : ?>
            <li class="wide">
                <label for="vat_id"><?php echo $this->__('VAT Number') ?></label>
                <div class="input-box">
                    <input type="text" name="vat_id" value="<?php echo $this->escapeHtml($this->getAddress()->getVatId()) ?>" title="<?php echo $this->__('VAT Number') ?>" id="vat_id" class="input-text <?php echo $this->helper('customer/address')->getAttributeValidationClass('vat_id') ?>" />
                </div>
            </li>
            <?php endif; ?>
            <li class="fields">
                <div class="field">
                    <label for="city" class="required"><em>*</em><?php echo $this->__('City') ?></label>
                    <div class="input-box">
                        <input type="text" name="city" value="Bengaluru"  title="<?php echo $this->__('City') ?>" class="input-text <?php echo $this->helper('customer/address')->getAttributeValidationClass('city') ?>" id="city" readonly/>
                    </div>
                </div>
                <div class="field">
                    <label for="region_id" class="required"><em>*</em><?php echo $this->__('State/Province') ?></label>
                    <div class="input-box">
                        <select id="region_id" name="region_id" title="<?php echo $this->__('State/Province') ?>" class="validate-select" style="display:none;">
                           <option value=""><?php echo $this->__('Please select region, state or province') ?></option>
                        </select>
                        <script type="text/javascript">
                        //<![CDATA[
                            $('region_id').setAttribute('defaultValue',  "<?php echo $this->getAddress()->getRegionId() ?>");
                        //]]>
                        </script>
                        <input type="text" id="region" name="region" value="Karnataka"  title="<?php echo $this->__('State/Province') ?>" class="input-text <?php echo $this->helper('customer/address')->getAttributeValidationClass('region') ?>" />
                    </div>
                </div>
            </li>
            <li class="fields">
                <div class="field">
                	<?php 
                            	$pindata = Mage::getStoreConfig('checkdelivery/general/pincode');
								$pincodearray = explode(",", $pindata); 
					?>
                    <label for="zip" class="required"><em>*</em><?php echo $this->__('Zip/Postal Code') ?></label>
                    <div class="input-box">
                        <!-- <input type="text" name="postcode" value="<?php echo $this->escapeHtml($this->getAddress()->getPostcode()) ?>" title="<?php echo $this->__('Zip/Postal Code') ?>" id="zip" class="input-text validate-zip-international <?php echo $this->helper('customer/address')->getAttributeValidationClass('postcode') ?>" /> -->                        
                        	<select name="postcode" class="validate-select displayblock required-entry" style="display:block !important;">
								<option value="">Select...</option>
								<?php foreach ($pincodearray as $key=>$value): ?>
								<option value="<?php echo $value; ?>" <?php if($value == $this->escapeHtml($this->getAddress()->getPostcode())){ echo 'selected="selected"'; } ?>><?php echo $value; ?></option>
								<?php endforeach; ?>
							</select>
                    </div>
                </div>
                <div class="field">
	                        <label for="billing:landmark"><?php echo $this->__('Landmark within 300mts') ?></label>
	                        <div class="input-box">
	                        	<?php //$landmarks = array("Borewell Road, Casa Gopalan","D' Silva Layout","Dodsworth Layout","ECC Road, Prestige Palms","ECC Road, The Deens Academy","EGG Road, Mana Placido","Golden Blossom, Kadugodi","Hope Farm Circle","ITPL","ITPL Back Gate, Foyer Infinity","ITPL Main Road, Brigade Tech Park","ITPL Main Road, G R Techpark","ITPL Main Road, Keerthi Signature","ITPL Main Road, Prestige Shanti Nikethan","Off ECC Road, SV MILAN","Prashanth Layout","Prithvi Layout","Whitefiled, Inner Circle","Whitefield Main Road, HDFC Bank","Whitefield Main Road, Maha Ganapathi Temple","Whitefiled Main Road, Holy Cross Church"); ?>
	                        	<?php $landmarks = array("Amarjyothi Layout", "AGS Layout", "Anand Nagar", "Appannna Block", "Ashok Nagar", "Brindavan Layout", "Chamundi Nagar", "Chola Nagar", "Doddamma Layout", "Dinnur", "Ganganagar", "Ganganagar Extn", "Ganganagar Layout", "Gunatha Vihar", "HMT Colony", "Kaval Byrasandra", "KGH Layout", "Lakshmayya Layout", "Manorayanapalya", "MM Nagar", "P&T Colony", "Ravindranath Tagore", "RBI Colony", "RT Nagar I Block", "RT Nagar II Block", "Seethappa Layout"); ?>
                                <?php $fax = $this->getAddress()->getFax();?>
	                            <select name="billing[landmark]" class="validate-select displayblock required-entry billing-landmark" style="display:block !important;">
	                            <option value="">Choose your landmark/Call Store to Check Availability</option>
	                            <?php foreach ($landmarks as $landmark): ?>
                                <?php 
                                        if($fax==$landmark) {
                                            $selected = 'selected=selected';
                                        }
                                        else {
                                             $selected ='';
                                        }
                                    ?>
                                    <option value="<?php echo $landmark; ?>" <?php echo $selected; ?> ><?php echo $landmark; ?></option>
	                            <?php endforeach; ?>
								 
	                            </select>
	                        </div>
                </div>
                <div class="field" style="display:none;">
                    <label for="country" class="required"><em>*</em><?php echo $this->__('Country') ?></label>
                    <div class="input-box">
                        <?php echo $this->getCountryHtmlSelect() ?>
                    </div>
                </div>
            </li>
            
            <li class="fields phonenumber displayblock" style="display:block !important;">
                	<div class="field">
                        <label for="billing:telephone" class="required"><em>*</em><?php echo $this->__('Telephone') ?></label>
                        <div class="input-box">
                        	<?php $telephone = ($this->getAddress()->getTelephone() == "")?"":$this->getAddress()->getTelephone(); ?>
                            <input type="text" name="telephone" value="<?php echo $telephone; ?>" title="<?php echo $this->__('Telephone') ?>" class="input-text required-entry validate-length maximum-length-12 minimum-length-10 validate-digits" maxlength="10" id="telephone" />
                        </div>
                    </div>
                </li>
            
            <li class="fields" style="display:none !important;">
                <div class="field">
                    <label for="telephone" class="required"><em>*</em><?php echo $this->__('Telephone') ?></label>
                    <?php $telephone = ($this->getAddress()->getTelephone() == "")?"":$this->getAddress()->getTelephone(); ?>
                    <div class="input-box">
                        <!--<input type="text" name="telephone" value="<?php echo $telephone; ?>" title="<?php echo $this->__('Telephone') ?>" class="input-text  validate-digits" maxlength="10" id="telephone" /> -->
                    </div>
                </div>
                <div class="field" style="display:none !important;">
                    <label for="fax"><?php echo $this->__('Fax') ?></label>
                    <div class="input-box">
                        <input type="text" name="fax" id="fax" title="<?php echo $this->__('Fax') ?>" value="<?php echo $this->escapeHtml($this->getAddress()->getFax()) ?>" class="input-text <?php echo $this->helper('customer/address')->getAttributeValidationClass('fax') ?>"  />
                    </div>
                </div>
            </li>
            <li<?php if($this->canSetAsDefaultBilling()) echo ' class="control"' ?>>
                <?php if($this->isDefaultBilling()): ?>
                    <strong><?php echo $this->__('Default Billing Address') ?></strong>
                <?php elseif($this->canSetAsDefaultBilling()): ?>
                    <input type="checkbox" id="primary_billing" name="default_billing" value="1" title="<?php echo $this->__('Use as My Default Billing Address') ?>" class="checkbox" /><label for="primary_billing"><?php echo $this->__('Use as my default billing address') ?></label>
                <?php else: ?>
                    <input type="hidden" name="default_billing" value="1" />
                <?php endif; ?>
            </li>
            <li<?php if($this->canSetAsDefaultShipping()) echo ' class="control"' ?>>
                <?php if($this->isDefaultShipping()): ?>
                    <strong><?php echo $this->__('Default Shipping Address') ?></strong>
                <?php elseif($this->canSetAsDefaultShipping()): ?>
                    <input type="checkbox" id="primary_shipping" name="default_shipping" value="1" title="<?php echo $this->__('Use as My Default Shipping Address') ?>" class="checkbox" /><label for="primary_shipping"><?php echo $this->__('Use as my default shipping address') ?></label>
                <?php else: ?>
                    <input type="hidden" name="default_shipping" value="1" />
                <?php endif; ?>
            </li>
        </ul>
    </div>
    <div class="buttons-set">
        <p class="required"><?php echo $this->__('* Required Fields') ?></p>
        <p class="back-link"><a href="<?php echo $this->escapeUrl($this->getBackUrl()) ?>"><small>&laquo; </small><?php echo $this->__('Back') ?></a></p>
        <button type="submit" title="<?php echo $this->__('Save Address') ?>" class="button"><span><span><?php echo $this->__('Save Address') ?></span></span></button>
    </div>
</form>
<script type="text/javascript">
//<![CDATA[
    var dataForm = new VarienForm('form-validate', true);
    new RegionUpdater('country', 'region', 'region_id', <?php echo $this->helper('directory')->getRegionJson() ?>, undefined, 'zip');
//]]>
</script>
<script>
	jQuery(document).ready(function(){
		jQuery(".displayblock").css("display","block");
        jQuery( ".billing-landmark" ).change(function() {
        var select = jQuery(this).val();
        jQuery('#fax').val(select);

         });
	});
</script>
<style>
.displayblock, .validate-select, .phonenumber{
	display: block !important;
}
</style>